#
# define display information
#
name: Assemble Reads with metaSPAdes - v4.2.0
tooltip: |
    Assemble metagenomic reads using the SPAdes assembler.
screenshots: []

icon: metaspades-blue.png

#
# define a set of similar methods that might be useful to the user
#
suggestions:
    apps:
        related:
            []
        next:
            []
    methods:
        related:
            []
        next:
            [annotate_contigset]

#
# Configure the display and description of parameters
#
parameters :
    read_libraries :
        ui-name : |
            Read library
        short-hint : |
            The libraries of reads to assemble.

    output_contigset_name :
        ui-name : |
            Output ContigSet
        short-hint : |
            The name under which the resulting ContigSet will be saved in the Narrative.

    min_contig_length :
        ui-name : |
            Minimum Contig Length
        short-hint : |
            The shortest contig to accept in the resulting assembly object.

    kmer_sizes :
        ui-name : |
            K-mer Sizes
        short-hint : |
            The default values for K-mer sizes are 33, 55, 77, 99, and 127. In the absence of these values, K-mer sizes are automatically selected. Note that all values must be odd, less than 128, and listed in ascending order.

    skip_error_correction :
        ui-name : |
            Assembly only (No Error Correction)
        short-hint : |
            Assembly only (No Error Correction).

    # --- NEW for SPAdes 4.2 ---
    threads:
        ui-name: |
            Threads
        short-hint: |
            CPU threads for metaSPAdes (-t). Default 16. Do not exceed your job’s allocation.

    memory_gb:
        ui-name: |
            Max memory (GB)
        short-hint: |
            Cap SPAdes memory use (-m). Advanced; default 250 GB. Keep within job limits.

    emit_gfa11:
        ui-name: |
            Emit legacy GFA 1.1
        short-hint: |
            Output GFA v1.1 instead of default v1.2 (for older downstream tools).

# Order the form: key fields first; tuck others under Advanced
layout:
  - read_libraries
  - output_contigset_name
  - min_contig_length
  - threads
  - advanced:
      - kmer_sizes
      - skip_error_correction
      - memory_gb
      - emit_gfa11

description : |
    <p>This is a KBase wrapper for the <a href="http://cab.spbu.ru/software/spades/" target="_blank">metaSPAdes</a> genomic reads assembler. MetaSPAdes is designed for assembling shotgun metagenomic reads.</p>

    <p><b>Operational notes:</b>
    <ul>
      <li>Currently the wrapper supports Illumina/IonTorrent paired-end FASTQ (uncompressed or gzipped).</li>
      <li>The <code>--careful</code> flag is <b>not allowed</b> for metagenomic assemblies and is not used.</li>
      <li>Metagenome assembly can only be run on one paired-end library.</li>
      <li>The k-mer parameter is autodetected by SPAdes if values are not specified.</li>
      <li>metaSPAdes can be sensitive to residual adapter/technical sequences; consider pre-processing with tools like Trimmomatic or Cutadapt before assembly.</li>
    </ul>
    </p>

    <p>For questions, please <a href="http://kbase.us/support/">contact us</a>.</p>

    <p>SPAdes version: 4.2.0</p>

publications :
    -
        display-text: |
             Nurk S, Meleshko D, Korobeynikov A, Pevzner PA. metaSPAdes: a new versatile metagenomic assembler. Genome Res. 2017; 27:824–834. doi: 10.1101/gr.213959.116
        link: https://www.ncbi.nlm.nih.gov/pubmed/28298430
        pmid: 28298430
    -
        display-text: |
             Prjibelski A, Antipov D, Meleshko D, Lapidus A, Korobeynikov A. Using SPAdes De Novo Assembler. Curr Protoc Bioinformatics. 2020 Jun;70(1):e102. doi: 10.1002/cpbi.102.
        link: https://currentprotocols.onlinelibrary.wiley.com/doi/10.1002/cpbi.102
        pmid: 32559359
